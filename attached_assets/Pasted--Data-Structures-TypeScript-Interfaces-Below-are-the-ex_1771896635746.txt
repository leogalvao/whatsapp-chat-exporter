 Data Structures (TypeScript Interfaces)

  Below are the exact data structures and types for the generated JSON files.

  1. Combined Messages File (`[Crew Name].json`)

    1 export interface CrewChatData {
    2   exportInfo: ExportInfo;
    3   messages: Message[];
    4   systemMessages: string[];
    5   mediaFiles: MediaFileReference[];
    6 }
    7 
    8 export interface ExportInfo {
    9   chatName: string;         // The name of the group/crew (e.g., "Miguel Venancio 
      Sidewalks")
   10   exportDate: string;       // ISO 8601 timestamp of when the chat was exported
   11   totalMessages: number;    // Total deduplicated messages in the array
   12   totalMedia: number;       // Total unique media files associated with the messag
   13   exportedBy: string;       // The tool/extension used for the initial export
   14 }
   15 
   16 export interface Message {
   17   id: string;               // Unique identifier for the message (used for 
      deduplication)
   18   type: "text" | "image" | "video" | "audio" | "document"; 
   19   content: string;          // The text content, or "[Image]" if it's media withou
      a caption
   20   timestamp: string;        // Local time representation (e.g., "6:21 AM")
   21   dateTime: string;         // ISO 8601 timestamp (e.g., "2026-02-23T06:21:00")
   22   date: string;             // YYYY-MM-DD format
   23   sender: string;           // Sender's name or phone number. System messages may 
      have an empty string
   24   isOutgoing: boolean;      // Whether the message was sent by the exporting user
   25   isForwarded: boolean;
   26   isDeleted: boolean;
   27   media: MediaDetails | null;
   28   quotedMessage: any | null; // Details if this message is a reply to another 
      message
   29   reactions: any[] | null;   // Array of emoji reactions, if applicable
   30 }
   31 
   32 export interface MediaDetails {
   33   type: string;             // Media type (e.g., "image")
   34   src: string;              // Original source filename
   35   exportedFilename: string; // The filename as it exists on the local disk
   36 }
   37 
   38 export interface MediaFileReference {
   39   messageId: string;        // Associates this file back to a specific Message.id
   40   type: string;
   41   filename: string;
   42 }

  2. OCR Dispatches File (`[Crew Name]_dispatches.json`)

    1 export interface CrewDispatches {
    2   crew: string;             // The name of the group/crew (e.g., "Miguel Venancio 
      Sidewalks")
    3   dispatches: DispatchMatch[];
    4 }
    5 
    6 export interface DispatchMatch {
    7   image_path: string;       // Relative path to the screenshot/image containing th
      table
    8   matched_message: string;  // The text message from the chat that matches the OCR
      data
    9   message_timestamp: string;// ISO 8601 timestamp of when the matching message was
      sent
   10   ocr_snippet: string;      // Truncated string of the raw text extracted from the
      image via OCR
   11   confidence: number;       // Float between 0.0 and 1.0 representing the fuzzy 
      match score
   12                             // (Scores > 0.8 typically indicate a highly accurate 
      substring match)
   13 }

  Usage Notes for the Replit Team
   * Analytics & Timelines: The dateTime field in the Message object should be used as
     the primary key for rendering chronological timelines or calculating response times
     between dispatches and completions.
   * Correlating Dispatches: To link a dispatch image to the actual chat flow, join
     DispatchMatch.matched_message and DispatchMatch.message_timestamp with
     Message.content and Message.dateTime in the main CrewChatData file.
   * Media Handling: All duplicate media files have been physically deleted from the
     file system. The image_path in the dispatches JSON points to the single remaining,
     unique copy of that specific screenshot.
